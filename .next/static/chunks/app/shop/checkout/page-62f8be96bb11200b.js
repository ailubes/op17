(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7060],{1328:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(5155),l=s(2115),r=s(2619),o=s.n(r),i=s(2391),n=s(5145),c=s(451);let d=["EUR","USD","UAH"],h=["NOVA_POST_BRANCH","NOVA_POST_COURIER"],u=["LIQPAY","MONOBANK"];function p(){let e=(0,c.Y)(),t=(0,i.V)(e),[s,r]=(0,l.useState)(null),[p,x]=(0,l.useState)(!0),[m,b]=(0,l.useState)(null),[g,f]=(0,l.useState)(!1),[v,j]=(0,l.useState)(null),[w,N]=(0,l.useState)(!1),[y,k]=(0,l.useState)(e);(0,l.useEffect)(()=>{k(e)},[e]);let[C,O]=(0,l.useState)({email:"",phone:"",currency:"EUR",shippingMethod:"NOVA_POST_BRANCH",provider:"LIQPAY",name:"",country:"Ukraine",region:"",city:"",postalCode:"",street1:"",street2:"",novaPostOfficeId:"",novaPostOfficeName:""}),P=async()=>{x(!0);let e=await fetch("/api/cart",{credentials:"include"});if(!e.ok){b("Failed to load cart."),x(!1);return}r((await e.json()).data||null),x(!1)};(0,l.useEffect)(()=>{P()},[]);let S=(0,l.useMemo)(()=>s?s.items.reduce((e,t)=>e+t.unitPriceEur*t.quantity,0):0,[s]),E=async e=>{if(e.preventDefault(),!s||0===s.items.length)return void b("Your cart is empty.");f(!0),b(null);let t={email:C.email,phone:C.phone,currency:C.currency,shippingMethod:C.shippingMethod,provider:C.provider,shippingAddress:{name:C.name,phone:C.phone,country:C.country,region:C.region||void 0,city:C.city,postalCode:C.postalCode||void 0,street1:C.street1,street2:C.street2||void 0,novaPostOfficeId:C.novaPostOfficeId||void 0,novaPostOfficeName:C.novaPostOfficeName||void 0}},a=await fetch("/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t),credentials:"include"});if(!a.ok){let e=await a.json().catch(()=>null);b((null==e?void 0:e.error)||"Checkout failed."),f(!1);return}let l=await a.json(),r=null==l?void 0:l.data;if(j((null==r?void 0:r.orderNumber)||""),f(!1),await P(),null==r?void 0:r.id){if("LIQPAY"===C.provider){N(!0);let e=await fetch("/api/payments/liqpay/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:r.id}),credentials:"include"});if(!e.ok){let t=await e.json().catch(()=>null);b((null==t?void 0:t.error)||"Failed to start LiqPay checkout."),N(!1);return}let t=await e.json(),s=document.createElement("form");s.method="POST",s.action=t.url,s.acceptCharset="utf-8";let a=document.createElement("input");a.type="hidden",a.name="data",a.value=t.data,s.appendChild(a);let l=document.createElement("input");l.type="hidden",l.name="signature",l.value=t.signature,s.appendChild(l),document.body.appendChild(s),s.submit();return}if("MONOBANK"===C.provider){var o;N(!0);let e=await fetch("/api/payments/monobank/invoice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:r.id}),credentials:"include"});if(!e.ok){let t=await e.json().catch(()=>null);b((null==t?void 0:t.error)||"Failed to create Monobank invoice."),N(!1);return}let t=await e.json();if(null==t||null==(o=t.data)?void 0:o.pageUrl){window.location.href=t.data.pageUrl;return}b("Monobank invoice missing payment URL."),N(!1)}}};return(0,a.jsxs)("div",{className:"min-h-screen bg-slate-950 text-white",children:[(0,a.jsx)("header",{className:"border-b border-white/10 bg-slate-950/95",children:(0,a.jsxs)("div",{className:"mx-auto flex max-w-6xl items-center justify-between px-6 py-5",children:[(0,a.jsx)(o(),{href:"/shop",className:"font-bebas text-3xl tracking-widest",children:"OP17 Checkout"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"hidden sm:flex items-center gap-2 border border-white/10 bg-slate-900/60 px-2 py-1",suppressHydrationWarning:!0,children:[{label:"EN",value:"en"},{label:"UK",value:"uk"},{label:"IT",value:"it"}].map(e=>(0,a.jsx)("button",{onClick:()=>{var t;(t=e.value)!==y&&((0,n.KX)(t),k(t),window.location.reload())},className:"px-2 py-1 text-[11px] font-barlow font-bold uppercase tracking-[0.2em] transition-colors ".concat(y===e.value?"bg-gold text-slate-950":"text-slate-300 hover:text-white"),children:e.label},e.value))}),(0,a.jsx)(o(),{href:"/shop/cart",className:"text-sm uppercase tracking-[0.2em] text-slate-400 hover:text-gold",children:t.checkout.backToCart})]})]})}),(0,a.jsxs)("main",{className:"mx-auto max-w-6xl px-6 py-10",children:[(0,a.jsx)("h1",{className:"font-bebas text-5xl mb-6",children:t.checkout.title}),m&&(0,a.jsx)("p",{className:"text-sm text-red-400 mb-4",children:m}),v&&(0,a.jsxs)("div",{className:"mb-6 border border-gold/40 bg-gold/10 p-4 text-gold",children:[t.checkout.orderCreated," ",v,(0,a.jsx)("div",{className:"mt-2 text-sm",children:(0,a.jsx)(o(),{href:"/shop/payment-status?order=".concat(v),className:"underline",children:t.checkout.viewStatus})})]}),p?(0,a.jsx)("p",{className:"text-slate-400",children:"Loading checkout..."}):s&&0!==s.items.length?(0,a.jsxs)("div",{className:"grid gap-8 lg:grid-cols-[2fr_1fr]",children:[(0,a.jsxs)("form",{className:"space-y-6",onSubmit:E,children:[(0,a.jsxs)("section",{className:"border border-white/10 bg-slate-900/60 p-6",children:[(0,a.jsx)("h2",{className:"font-bebas text-2xl mb-4",children:t.checkout.contact}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsx)("input",{type:"email",placeholder:"Email",required:!0,value:C.email,onChange:e=>O({...C,email:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold"}),(0,a.jsx)("input",{type:"tel",placeholder:"Phone",value:C.phone,onChange:e=>O({...C,phone:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold"})]})]}),(0,a.jsxs)("section",{className:"border border-white/10 bg-slate-900/60 p-6",children:[(0,a.jsx)("h2",{className:"font-bebas text-2xl mb-4",children:t.checkout.shipping}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsx)("input",{placeholder:t.checkout.name,required:!0,value:C.name,onChange:e=>O({...C,name:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold"}),(0,a.jsx)("input",{placeholder:t.checkout.city,required:!0,value:C.city,onChange:e=>O({...C,city:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold"}),(0,a.jsx)("input",{placeholder:t.checkout.region,value:C.region,onChange:e=>O({...C,region:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold"}),(0,a.jsx)("input",{placeholder:t.checkout.postalCode,value:C.postalCode,onChange:e=>O({...C,postalCode:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold"}),(0,a.jsx)("input",{placeholder:t.checkout.street1,required:!0,value:C.street1,onChange:e=>O({...C,street1:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold"}),(0,a.jsx)("input",{placeholder:t.checkout.street2,value:C.street2,onChange:e=>O({...C,street2:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold"})]}),(0,a.jsxs)("div",{className:"mt-4 grid gap-4 md:grid-cols-2",children:[(0,a.jsx)("select",{value:C.shippingMethod,onChange:e=>O({...C,shippingMethod:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white",children:h.map(e=>(0,a.jsx)("option",{value:e,children:e.replace("NOVA_POST_","Nova Post ")},e))}),(0,a.jsx)("input",{placeholder:t.checkout.novaPostOffice,value:C.novaPostOfficeName,onChange:e=>O({...C,novaPostOfficeName:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold"})]})]}),(0,a.jsxs)("section",{className:"border border-white/10 bg-slate-900/60 p-6",children:[(0,a.jsx)("h2",{className:"font-bebas text-2xl mb-4",children:t.checkout.payment}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsx)("select",{value:C.currency,onChange:e=>O({...C,currency:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white",children:d.map(e=>(0,a.jsx)("option",{value:e,children:e},e))}),(0,a.jsx)("select",{value:C.provider,onChange:e=>O({...C,provider:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white",children:u.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})]}),(0,a.jsx)("button",{type:"submit",disabled:g,className:"w-full bg-gold text-slate-950 font-barlow font-bold uppercase tracking-wider py-3 hover:bg-white transition-colors disabled:opacity-60",children:w?t.checkout.redirecting:g?t.checkout.processing:t.checkout.placeOrder})]}),(0,a.jsxs)("aside",{className:"border border-white/10 bg-slate-900/60 p-6 h-fit",children:[(0,a.jsx)("h3",{className:"font-bebas text-2xl",children:t.checkout.orderSummary}),(0,a.jsx)("div",{className:"mt-4 space-y-3",children:s.items.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm text-slate-300",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{children:e.variant.product.name}),(0,a.jsxs)("p",{className:"text-xs text-slate-500",children:["x",e.quantity]})]}),(0,a.jsxs)("span",{children:["EUR ",e.unitPriceEur]})]},e.id))}),(0,a.jsxs)("div",{className:"mt-6 border-t border-white/10 pt-4 flex items-center justify-between",children:[(0,a.jsx)("span",{className:"font-bebas text-2xl",children:t.cart.total}),(0,a.jsx)("span",{className:"font-bebas text-3xl text-gold",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"EUR",maximumFractionDigits:0}).format(S)})]})]})]}):(0,a.jsxs)("div",{className:"border border-white/10 bg-slate-900/60 p-8 text-center",children:[(0,a.jsx)("p",{className:"text-slate-400",children:t.checkout.empty}),(0,a.jsx)(o(),{href:"/shop",className:"mt-4 inline-flex items-center px-6 py-3 bg-gold text-slate-950 font-barlow font-bold uppercase tracking-wider text-sm hover:bg-white transition-colors",children:t.checkout.backToShop})]})]}),(0,a.jsx)("footer",{className:"border-t border-white/10 bg-slate-950",children:(0,a.jsxs)("div",{className:"container mx-auto px-6 md:px-14 py-14",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)(o(),{href:"/",className:"inline-flex items-center gap-3 group",children:[(0,a.jsx)("img",{src:"/images/logos/blue-yellow.png",alt:"Oleh Plotnytskyi OP17 logo",className:"h-10 w-auto transition-transform group-hover:scale-105"}),(0,a.jsx)("span",{className:"sr-only",children:"OP17"})]}),(0,a.jsx)("p",{className:"mt-4 text-slate-400 text-sm max-w-xs",children:t.footer.tagline})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-barlow font-bold uppercase tracking-widest mb-4 text-white",children:t.footer.shopLinks}),(0,a.jsxs)("ul",{className:"space-y-3 text-sm text-slate-400",children:[(0,a.jsx)("li",{children:(0,a.jsx)(o(),{href:"/shop",className:"hover:text-gold transition-colors",children:t.footer.shopHome})}),(0,a.jsx)("li",{children:(0,a.jsx)(o(),{href:"/shop/cart",className:"hover:text-gold transition-colors",children:t.footer.cart})}),(0,a.jsx)("li",{children:(0,a.jsx)(o(),{href:"/shop/checkout",className:"hover:text-gold transition-colors",children:t.footer.checkout})}),(0,a.jsx)("li",{children:(0,a.jsx)(o(),{href:"/shop/payment-status",className:"hover:text-gold transition-colors",children:t.footer.paymentStatus})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-barlow font-bold uppercase tracking-widest mb-4 text-white",children:t.footer.support}),(0,a.jsxs)("ul",{className:"space-y-3 text-sm text-slate-400",children:[(0,a.jsx)("li",{children:t.footer.shipping}),(0,a.jsx)("li",{children:t.footer.payments}),(0,a.jsx)("li",{children:t.footer.supportEmail})]})]})]}),(0,a.jsxs)("div",{className:"pt-10 mt-10 border-t border-white/10 flex flex-col md:flex-row justify-between items-center gap-4 text-xs text-slate-500",children:[(0,a.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Plotnytskyi Collection. ",t.footer.rights]}),(0,a.jsx)("p",{className:"uppercase tracking-[0.2em] text-slate-600",children:t.footer.official})]})]})})]})}},7059:(e,t,s)=>{Promise.resolve().then(s.bind(s,1328))}},e=>{e.O(0,[2619,389,8441,1255,7358],()=>e(e.s=7059)),_N_E=e.O()}]);