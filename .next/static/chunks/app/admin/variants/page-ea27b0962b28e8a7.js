(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6385],{4867:(e,s,t)=>{Promise.resolve().then(t.bind(t,6673))},6673:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var a=t(5155),l=t(2115),r=t(2619),c=t.n(r);let i=["DISALLOW","ALLOW"],n={productId:"",sku:"",name:"",size:"",color:"",priceEur:"",stock:"0",isActive:!0,backorderPolicy:"DISALLOW"};function d(){let[e,s]=(0,l.useState)([]),[t,r]=(0,l.useState)([]),[d,o]=(0,l.useState)(!0),[x,u]=(0,l.useState)(null),[p,m]=(0,l.useState)({...n}),[h,b]=(0,l.useState)(null),g=async()=>{o(!0);let[e,t]=await Promise.all([fetch("/api/admin/variants",{credentials:"include"}),fetch("/api/admin/products",{credentials:"include"})]);if(!e.ok){u("Failed to load variants."),o(!1);return}let a=await e.json(),l=t.ok?await t.json():{data:[]};s(a.data||[]),r(l.data||[]),o(!1)};(0,l.useEffect)(()=>{g()},[]);let v=()=>{m({...n}),b(null)},j=async()=>{u(null);let e={...p,priceEur:""===p.priceEur?void 0:Number(p.priceEur),stock:Number(p.stock)},s=await fetch(h?"/api/admin/variants/".concat(h):"/api/admin/variants",{method:h?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!s.ok){let e=await s.json().catch(()=>null);u((null==e?void 0:e.error)||"Save failed.");return}v(),g()},N=async e=>{confirm("Delete this variant?")&&(await fetch("/api/admin/variants/".concat(e),{method:"DELETE",credentials:"include"}),g())},f=(0,l.useMemo)(()=>h?"Edit Variant":"Create Variant",[h]);return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"font-bebas text-5xl",children:"Variants"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Create SKUs, manage stock, and set variant pricing."})]}),(0,a.jsx)(c(),{href:"/admin",className:"text-sm uppercase tracking-[0.2em] text-slate-400 hover:text-gold",children:"Back to Admin"})]}),(0,a.jsxs)("section",{className:"border border-white/10 bg-slate-900/60 p-6",children:[(0,a.jsx)("h2",{className:"font-bebas text-2xl mb-4",children:f}),x&&(0,a.jsx)("p",{className:"text-sm text-red-400 mb-3",children:x}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Product"}),(0,a.jsxs)("select",{value:p.productId,onChange:e=>m({...p,productId:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white",children:[(0,a.jsx)("option",{value:"",children:"Select product"}),t.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"SKU"}),(0,a.jsx)("input",{value:p.sku,onChange:e=>m({...p,sku:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Name"}),(0,a.jsx)("input",{value:p.name,onChange:e=>m({...p,name:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Size"}),(0,a.jsx)("input",{value:p.size,onChange:e=>m({...p,size:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Color"}),(0,a.jsx)("input",{value:p.color,onChange:e=>m({...p,color:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Price (EUR)"}),(0,a.jsx)("input",{type:"number",value:p.priceEur,onChange:e=>m({...p,priceEur:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Stock"}),(0,a.jsx)("input",{type:"number",value:p.stock,onChange:e=>m({...p,stock:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Backorder"}),(0,a.jsx)("select",{value:p.backorderPolicy,onChange:e=>m({...p,backorderPolicy:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white",children:i.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"checkbox",checked:p.isActive,onChange:e=>m({...p,isActive:e.target.checked}),className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm text-slate-300",children:"Active"})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:j,className:"px-6 py-3 bg-gold text-slate-950 font-barlow font-bold uppercase tracking-wider text-sm hover:bg-white transition-colors",children:h?"Save Changes":"Create Variant"}),h&&(0,a.jsx)("button",{onClick:v,className:"text-sm uppercase tracking-[0.2em] text-slate-400 hover:text-white",children:"Cancel"})]})]}),(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"font-bebas text-2xl",children:"Existing Variants"}),d?(0,a.jsx)("p",{className:"text-slate-400",children:"Loading variants..."}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>{var s,t;return(0,a.jsxs)("div",{className:"border border-white/10 bg-slate-900/40 p-4 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bebas text-xl",children:e.sku}),(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:(null==(s=e.product)?void 0:s.name)||"No product"}),(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2 text-xs text-slate-400",children:[(0,a.jsxs)("span",{children:["Stock ",e.stock]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:["EUR ",null!=(t=e.priceEur)?t:"—"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>{var s,t,a;b(e.id),m({productId:(null==(s=e.product)?void 0:s.id)||"",sku:e.sku||"",name:e.name||"",size:e.size||"",color:e.color||"",priceEur:null!==e.priceEur&&void 0!==e.priceEur?e.priceEur.toString():"",stock:(null==(t=e.stock)?void 0:t.toString())||"0",isActive:null==(a=e.isActive)||a,backorderPolicy:e.backorderPolicy||"DISALLOW"})},className:"px-4 py-2 border border-white/10 text-xs uppercase tracking-[0.2em] hover:border-gold",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>N(e.id),className:"px-4 py-2 border border-red-500/40 text-xs uppercase tracking-[0.2em] text-red-300 hover:border-red-400",children:"Delete"})]})]},e.id)})})]})]})}}},e=>{e.O(0,[2619,8441,1255,7358],()=>e(e.s=4867)),_N_E=e.O()}]);