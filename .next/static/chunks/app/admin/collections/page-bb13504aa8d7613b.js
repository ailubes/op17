(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8064],{2740:(e,s,t)=>{Promise.resolve().then(t.bind(t,8392))},8392:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var a=t(5155),l=t(2115),c=t(2619),i=t.n(c);let r=["UPCOMING","LIVE","ENDED"],n=["DROP","ALWAYS_ON"],d=["DISALLOW","ALLOW"],o={name:"",slug:"",description:"",status:"UPCOMING",saleMode:"DROP",startsAt:"",endsAt:"",isVisible:!0,backorderPolicy:"DISALLOW"};function x(){let[e,s]=(0,l.useState)([]),[t,c]=(0,l.useState)(!0),[x,p]=(0,l.useState)(null),[h,u]=(0,l.useState)({...o}),[m,b]=(0,l.useState)(null),g=async()=>{c(!0);let e=await fetch("/api/admin/collections",{credentials:"include"});if(!e.ok){p("Failed to load collections."),c(!1);return}s((await e.json()).data||[]),c(!1)};(0,l.useEffect)(()=>{g()},[]);let j=()=>{u({...o}),b(null)},N=async()=>{p(null);let e={...h,startsAt:h.startsAt?new Date(h.startsAt).toISOString():null,endsAt:h.endsAt?new Date(h.endsAt).toISOString():null},s=await fetch(m?"/api/admin/collections/".concat(m):"/api/admin/collections",{method:m?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!s.ok){let e=await s.json().catch(()=>null);p((null==e?void 0:e.error)||"Save failed.");return}j(),g()},v=async e=>{confirm("Delete this collection?")&&(await fetch("/api/admin/collections/".concat(e),{method:"DELETE",credentials:"include"}),g())},f=(0,l.useMemo)(()=>m?"Edit Collection":"Create Collection",[m]);return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"font-bebas text-5xl",children:"Collections"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Manage drops and always-on collections."})]}),(0,a.jsx)(i(),{href:"/admin",className:"text-sm uppercase tracking-[0.2em] text-slate-400 hover:text-gold",children:"Back to Admin"})]}),(0,a.jsxs)("section",{className:"border border-white/10 bg-slate-900/60 p-6",children:[(0,a.jsx)("h2",{className:"font-bebas text-2xl mb-4",children:f}),x&&(0,a.jsx)("p",{className:"text-sm text-red-400 mb-3",children:x}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Name"}),(0,a.jsx)("input",{value:h.name,onChange:e=>u({...h,name:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Slug"}),(0,a.jsx)("input",{value:h.slug,onChange:e=>u({...h,slug:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold"})]}),(0,a.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Description"}),(0,a.jsx)("textarea",{value:h.description,onChange:e=>u({...h,description:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold",rows:3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Status"}),(0,a.jsx)("select",{value:h.status,onChange:e=>u({...h,status:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white",children:r.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Sale Mode"}),(0,a.jsx)("select",{value:h.saleMode,onChange:e=>u({...h,saleMode:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white",children:n.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Starts At"}),(0,a.jsx)("input",{type:"datetime-local",value:h.startsAt,onChange:e=>u({...h,startsAt:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Ends At"}),(0,a.jsx)("input",{type:"datetime-local",value:h.endsAt,onChange:e=>u({...h,endsAt:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Backorder"}),(0,a.jsx)("select",{value:h.backorderPolicy,onChange:e=>u({...h,backorderPolicy:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white",children:d.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"checkbox",checked:h.isVisible,onChange:e=>u({...h,isVisible:e.target.checked}),className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm text-slate-300",children:"Visible in storefront"})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:N,className:"px-6 py-3 bg-gold text-slate-950 font-barlow font-bold uppercase tracking-wider text-sm hover:bg-white transition-colors",children:m?"Save Changes":"Create Collection"}),m&&(0,a.jsx)("button",{onClick:j,className:"text-sm uppercase tracking-[0.2em] text-slate-400 hover:text-white",children:"Cancel"})]})]}),(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"font-bebas text-2xl",children:"Existing Collections"}),t?(0,a.jsx)("p",{className:"text-slate-400",children:"Loading collections..."}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>{var s,t;return(0,a.jsxs)("div",{className:"border border-white/10 bg-slate-900/40 p-4 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bebas text-xl",children:e.name}),(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:e.slug}),(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2 text-xs text-slate-400",children:[(0,a.jsx)("span",{children:e.status}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:e.saleMode}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[null!=(t=null==(s=e.products)?void 0:s.length)?t:0," products"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>{var s;b(e.id),u({name:e.name||"",slug:e.slug||"",description:e.description||"",status:e.status||"UPCOMING",saleMode:e.saleMode||"DROP",startsAt:e.startsAt?e.startsAt.slice(0,16):"",endsAt:e.endsAt?e.endsAt.slice(0,16):"",isVisible:null==(s=e.isVisible)||s,backorderPolicy:e.backorderPolicy||"DISALLOW"})},className:"px-4 py-2 border border-white/10 text-xs uppercase tracking-[0.2em] hover:border-gold",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>v(e.id),className:"px-4 py-2 border border-red-500/40 text-xs uppercase tracking-[0.2em] text-red-300 hover:border-red-400",children:"Delete"})]})]},e.id)})})]})]})}}},e=>{e.O(0,[2619,8441,1255,7358],()=>e(e.s=2740)),_N_E=e.O()}]);