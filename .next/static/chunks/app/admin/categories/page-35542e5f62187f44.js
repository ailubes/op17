(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6631],{2083:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var a=t(5155),r=t(2115),l=t(2619),n=t.n(l);let i={name:"",slug:"",parentId:"",sortOrder:"0",isActive:!0};function c(){let[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),[o,x]=(0,r.useState)({...i}),[h,p]=(0,r.useState)(null),m=async()=>{l(!0);let e=await fetch("/api/admin/categories",{credentials:"include"});if(!e.ok){d("Failed to load categories."),l(!1);return}s((await e.json()).data||[]),l(!1)};(0,r.useEffect)(()=>{m()},[]);let u=()=>{x({...i}),p(null)},g=async()=>{d(null);let e={...o,sortOrder:Number(o.sortOrder),parentId:o.parentId||null},s=await fetch(h?"/api/admin/categories/".concat(h):"/api/admin/categories",{method:h?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"});if(!s.ok){let e=await s.json().catch(()=>null);d((null==e?void 0:e.error)||"Save failed.");return}u(),m()},b=async e=>{confirm("Delete this category?")&&(await fetch("/api/admin/categories/".concat(e),{method:"DELETE",credentials:"include"}),m())},j=(0,r.useMemo)(()=>h?"Edit Category":"Create Category",[h]);return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"font-bebas text-5xl",children:"Categories"}),(0,a.jsx)("p",{className:"text-slate-400",children:"Group products for navigation and filters."})]}),(0,a.jsx)(n(),{href:"/admin",className:"text-sm uppercase tracking-[0.2em] text-slate-400 hover:text-gold",children:"Back to Admin"})]}),(0,a.jsxs)("section",{className:"border border-white/10 bg-slate-900/60 p-6",children:[(0,a.jsx)("h2",{className:"font-bebas text-2xl mb-4",children:j}),c&&(0,a.jsx)("p",{className:"text-sm text-red-400 mb-3",children:c}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Name"}),(0,a.jsx)("input",{value:o.name,onChange:e=>x({...o,name:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Slug"}),(0,a.jsx)("input",{value:o.slug,onChange:e=>x({...o,slug:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Parent"}),(0,a.jsxs)("select",{value:o.parentId,onChange:e=>x({...o,parentId:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white",children:[(0,a.jsx)("option",{value:"",children:"None"}),e.filter(e=>e.id!==h).map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:"Sort Order"}),(0,a.jsx)("input",{type:"number",value:o.sortOrder,onChange:e=>x({...o,sortOrder:e.target.value}),className:"w-full bg-slate-950 border border-white/10 px-4 py-3 text-white focus:outline-none focus:border-gold"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("input",{type:"checkbox",checked:o.isActive,onChange:e=>x({...o,isActive:e.target.checked}),className:"h-4 w-4"}),(0,a.jsx)("span",{className:"text-sm text-slate-300",children:"Active"})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:g,className:"px-6 py-3 bg-gold text-slate-950 font-barlow font-bold uppercase tracking-wider text-sm hover:bg-white transition-colors",children:h?"Save Changes":"Create Category"}),h&&(0,a.jsx)("button",{onClick:u,className:"text-sm uppercase tracking-[0.2em] text-slate-400 hover:text-white",children:"Cancel"})]})]}),(0,a.jsxs)("section",{className:"space-y-4",children:[(0,a.jsx)("h2",{className:"font-bebas text-2xl",children:"Existing Categories"}),t?(0,a.jsx)("p",{className:"text-slate-400",children:"Loading categories..."}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>{var s,t,r;return(0,a.jsxs)("div",{className:"border border-white/10 bg-slate-900/40 p-4 flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-bebas text-xl",children:e.name}),(0,a.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-slate-500",children:e.slug}),(0,a.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2 text-xs text-slate-400",children:[(0,a.jsxs)("span",{children:["Sort ",e.sortOrder]}),(0,a.jsx)("span",{children:"•"}),(0,a.jsx)("span",{children:(null==(s=e.parent)?void 0:s.name)||"No parent"}),(0,a.jsx)("span",{children:"•"}),(0,a.jsxs)("span",{children:[null!=(r=null==(t=e.children)?void 0:t.length)?r:0," children"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>{var s,t,a;p(e.id),x({name:e.name||"",slug:e.slug||"",parentId:(null==(s=e.parent)?void 0:s.id)||"",sortOrder:(null==(t=e.sortOrder)?void 0:t.toString())||"0",isActive:null==(a=e.isActive)||a})},className:"px-4 py-2 border border-white/10 text-xs uppercase tracking-[0.2em] hover:border-gold",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>b(e.id),className:"px-4 py-2 border border-red-500/40 text-xs uppercase tracking-[0.2em] text-red-300 hover:border-red-400",children:"Delete"})]})]},e.id)})})]})]})}},3137:(e,s,t)=>{Promise.resolve().then(t.bind(t,2083))}},e=>{e.O(0,[2619,8441,1255,7358],()=>e(e.s=3137)),_N_E=e.O()}]);